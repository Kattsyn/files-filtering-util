# Утилита фильтрации файлов

## Техническое задание

1. Приходят файлы, которые построчно могут иметь:
   вещественные числа, целые числа или строки
2. В качестве разделителя переход на новую строку
3. Нужно разделить эти типы данных по файлам:
   integers.txt, floats.txt, strings.txt
4. Если какого-то типа данных нет, то файл не создается
5. В процессе добавления собирать статистику: полную или краткую
6. Программа должна обрабатывать все возможные виды ошибок.
7. Выводить сообщение об ошибке, если ее выполнение невозможно.
8. Частичная обработка лучше, чем остановка программы.


**Краткая статистика**: включает только кол-во элементов записанных в исходящие файлы

**Полная статистика**: доп. содержит min, max, avg, sum чисел.
Для строк: помимо кол-ва, размер самой короткой и самой длинной строки.

### ДОП ПАРАМЕТРЫ:
- --help - для вывода информации об утилите.

- -o <path> - записав параметр -o, затем <path> - путь, можно указать куда складывать результирующие файлы.\
(например: -o C:\Users\UserName\Documents , тогда файлы будут складываться по этому пути).
- -p <fileName> - префиксная строка, которая будет добавлена к именам результирующих файлов.\
                (например: -p result_, тогда файлы будут result_integers.txt, result_floats.txt, result_strings.txt)\
- -a - записав параметр -a будет включен режим добавления в уже существующие файлы, иначе по умолчанию будет режим перезаписи.\

- -s - записав параметр -s по завершению программы будет выведено сообщение с краткой статистикой.\
                
- -f - записав параметр -f по завершению программы будет выведено сообщение с полной статистикой.

## Пояснение к реализации

- Так как в ТЗ не было сказано в каком виде реализовывать задание, было принято решение сделать отдельный, ни от кого не зависимый класс, который полностью делает весь функционал самостоятельно.
- Все необходимые доп. классы являются внутренними. Возможно внешне это перегружает класс, но зато он остается независимым, и если он где-то пригодится, то его будет достаточно импортировать и вызвать его основном метод фильтрации.
- Метод фильтрации принимает на вход **String[] args** 
- Старался разделять ответственность между методами и добиться высокой производительности, но без фанатизма. В угоду большей производительности и возможности обрабатывать десятки миллионов чисел за раз можно было нагородить всё в один страшный метод, который работал бы долго, но зато для любого кол-ва чисел.
- Использовались только стандартные решения языка Java, никаких сторонних библиотек.
- Все числа приводились к их общему интерфейсу Number, чтобы при выводе статистики сохранить их искомый облик, а также оставить точность расчетов при расчете среднего значения и суммы.
- Если бы была проверка только на Min и Max, то можно было вообще обойтись без любых приведений до чисел, делать всё на уровне строк.
- Проверка на то, является ли строка числом делалась последовательным проходом по строке. Данный подход намного быстрее регулярных выражений (смотрел тесты других людей, а также проводил свои). Также это лучше пробросов исключений, думаю понятно почему.
- Файл на 5 миллионов различных чисел (long, integer, float, double, а также вещественные в экспоненциальной форме) просчитывался в среднем за 3000 мс.
- Пришлось оставить ограничение по величине чисел (для целых long, для вещественных double), тк эти числа используются в дальнейшем для расчетов. Иначе всё ограничивалось бы строками.
- После определения того, что строка может быть представлена числом, она в обязательном порядке парсится до double или long, чтобы точно убедиться, что всё верно, а также убрать незначащие нули, строками это было бы дольше, хуже, сложнее.
- Утилита полностью на русском языке. Как комментарии к коду, так и вывод текста или информации.
- Проект собран в .jar файл, который находится в папке jars

## Средства реализации

- Java 17
- Gradle 8.4
- Без сторонних библиотек

## Инструкция по запуску

### Локализация

Т.к. утилита на русском, то при работе может возникнуть проблема с кодировкой кириллицы на Windows. В таком случае следующие команды нужно ввести в командную строку:
- `REM change CHCP to UTF-8`
- `CHCP 65001`
- `CLS`

### Пример запуска

#### В командной строке

`java -jar util.jar -s -p sample- -f test_input1.txt test_input2.txt`

#### Пример входного файла test_input1.txt

    Lorem ipsum dolor sit amet
    45
    Пример
    3.1415
    consectetur adipiscing
    -0.001
    тестовое задание
    100500

#### Пример входного файла test_input2.txt

    Нормальная форма числа с плавающей запятой
    1.528535047E-25
    Long
    1234567890123456789

#### Результат работы

#### sample-integers.txt

    45
    100500
    1234567890123456789

#### sample-floats.txt

    3.1415
    -0.001
    1.528535047E-25

#### sample-strings.txt

    Lorem ipsum dolor sit amet
    Пример
    consectetur adipiscing
    тестовое задание
    Нормальная форма числа с плавающей запятой
    Long